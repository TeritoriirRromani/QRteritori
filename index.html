<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<title>Teritorii</title>
<style>
  body {
    background: #e6f2ff;
    font-family: Arial, sans-serif;
    text-align: center;
    padding: 40px;
  }
  h2 {
    margin-bottom: 20px;
  }
  .btn {
    display: block;
    margin: 12px auto;
    padding: 14px 20px;
    max-width: 320px;
    background: #1e88e5;
    color: white;
    text-decoration: none;
    border-radius: 8px;
    font-size: 16px;
  }
  .btn:hover {
    background: #1565c0;
  }
  .loader {
    margin-top: 40px;
  }
</style>
</head>

<body>

<h2 id="titlu">Se încarcă...</h2>
<div id="lista"></div>

<script>
const AS_URL = "https://script.google.com/macros/s/AKfycbwNhNZNyKnCTZxKvOLigRs2EmTH0dvXVYRQWk_B6QAq3IQBDDQRqJTyd5CLAx8f63Xj/exec";

const params = new URLSearchParams(window.location.search);
const k = params.get("k");

if (!k) {
  document.getElementById("titlu").innerText = "Link invalid";
} else {
  fetch(AS_URL + "?k=" + encodeURIComponent(k))
    .then(r => r.json())
    .then(data => {
      if (!data.length) {
        document.getElementById("titlu").innerText = "Nu ai teritorii active";
        return;
      }

      // un singur teritoriu → redirect
      if (data.length === 1) {
        window.location.replace(data[0].link);
        return;
      }

      // mai multe teritorii → butoane
      document.getElementById("titlu").innerText = "Alege teritoriul";

      const lista = document.getElementById("lista");
      data.forEach(t => {
        const a = document.createElement("a");
        a.href = t.link;
        a.innerText = t.nume;
        a.className = "btn";
        lista.appendChild(a);
      });
    })
    .catch(() => {
      document.getElementById("titlu").innerText = "Eroare la încărcare";
    });
}
</script>

</body>
</html>











